<!DOCTYPE html>
<html>
<head>
  <title>Camp Scheduler</title>
  <style>
    body { font-family: Arial, sans-serif; }
    .tabs { display: flex; margin-bottom: 10px; }
    .tab { padding: 10px 20px; cursor: pointer; border: 1px solid #ccc; border-bottom: none; }
    .tab.active { background: #f0f0f0; font-weight: bold; }
    .tab-content { border: 1px solid #ccc; padding: 10px; display: none; }
    .tab-content.active { display: block; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 5px; text-align: center; }
    .color-box { width: 20px; height: 20px; display: inline-block; border: 1px solid #000; vertical-align: middle; }
  </style>
</head>
<body>
  <h1>Camp Scheduler</h1>

  <!-- Tabs -->
  <div class="tabs">
    <div class="tab active" onclick="showTab('setup')">Setup & Configuration</div>
    <div class="tab" onclick="showTab('schedule')">Daily Schedule</div>
  </div>

  <!-- Setup Tab -->
  <div id="setup" class="tab-content active">
    <h2>Setup & Configuration</h2>

    <!-- Bunks -->
    <h3>Bunks</h3>
    <input id="bunkInput" placeholder="Enter bunk">
    <button onclick="addBunk()">Add Bunk</button>
    <ul id="bunkList"></ul>

    <!-- Divisions -->
    <h3>Divisions</h3>
    <input id="divisionInput" placeholder="Enter division">
    <input type="color" id="divisionColor">
    <button onclick="addDivision()">Add Division</button>
    <ul id="divisionList"></ul>

    <!-- Times -->
    <h3>Times</h3>
    <input type="time" id="startTime"> to 
    <input type="time" id="endTime">
    <button onclick="generateTimes()">Generate Times</button>

    <!-- Activities -->
    <h3>Fields & Activities</h3>
    <input id="activityInput" placeholder="Enter activity">
    <button onclick="addActivity()">Add Activity</button>
    <ul id="activityList"></ul>
  </div>

  <!-- Schedule Tab -->
  <div id="schedule" class="tab-content">
    <h2>Daily Schedule</h2>
    <table id="scheduleTable">
      <thead>
        <tr>
          <th>Time</th>
          <th>Division</th>
          <th>Bunk</th>
          <th>Activity</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    let bunks = [];
    let divisions = [];
    let times = [];
    let activities = [];
    let autoColors = ["#4CAF50", "#2196F3", "#E91E63", "#FF9800", "#9C27B0"];
    let colorIndex = 0;

    function showTab(tab) {
      document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
      document.querySelectorAll(".tab-content").forEach(c => c.classList.remove("active"));
      document.querySelector(`.tab[onclick="showTab('${tab}')"]`).classList.add("active");
      document.getElementById(tab).classList.add("active");
    }

    // Bunks
    function addBunk() {
      const input = document.getElementById("bunkInput");
      if (input.value.trim() !== "") {
        bunks.push(input.value.trim());
        updateBunkList();
        input.value = "";
      }
    }
    function updateBunkList() {
      const ul = document.getElementById("bunkList");
      ul.innerHTML = "";
      bunks.forEach((bunk, i) => {
        const li = document.createElement("li");
        li.textContent = bunk;
        li.contentEditable = true;
        li.onblur = () => bunks[i] = li.textContent.trim();
        ul.appendChild(li);
      });
    }

    // Divisions
    function addDivision() {
      const input = document.getElementById("divisionInput");
      const colorInput = document.getElementById("divisionColor");
      if (input.value.trim() !== "") {
        const color = colorInput.value || autoColors[colorIndex % autoColors.length];
        divisions.push({ name: input.value.trim(), color });
        colorIndex++;
        updateDivisionList();
        input.value = "";
      }
    }
    function updateDivisionList() {
      const ul = document.getElementById("divisionList");
      ul.innerHTML = "";
      divisions.forEach((div, i) => {
        const li = document.createElement("li");
        const box = document.createElement("span");
        box.className = "color-box";
        box.style.backgroundColor = div.color;
        const text = document.createElement("span");
        text.textContent = " " + div.name;
        text.contentEditable = true;
        text.onblur = () => divisions[i].name = text.textContent.trim();
        const picker = document.createElement("input");
        picker.type = "color";
        picker.value = div.color;
        picker.oninput = () => { div.color = picker.value; updateDivisionList(); };
        li.appendChild(box);
        li.appendChild(text);
        li.appendChild(picker);
        ul.appendChild(li);
      });
    }

    // Activities
    function addActivity() {
      const input = document.getElementById("activityInput");
      if (input.value.trim() !== "") {
        activities.push(input.value.trim());
        updateActivityList();
        input.value = "";
      }
    }
    function updateActivityList() {
      const ul = document.getElementById("activityList");
      ul.innerHTML = "";
      activities.forEach((act, i) => {
        const li = document.createElement("li");
        li.textContent = act;
        li.contentEditable = true;
        li.onblur = () => activities[i] = li.textContent.trim();
        ul.appendChild(li);
      });
    }

    // Times
    function generateTimes() {
      const start = document.getElementById("startTime").value;
      const end = document.getElementById("endTime").value;
      if (!start || !end) return;

      let [sh, sm] = start.split(":").map(Number);
      let [eh, em] = end.split(":").map(Number);

      times = [];
      while (sh < eh || (sh === eh && sm < em)) {
        let hour = sh % 12 || 12;
        let ampm = sh < 12 ? "AM" : "PM";
        times.push(`${hour}:${sm.toString().padStart(2,"0")} ${ampm}`);
        sm += 30;
        if (sm >= 60) { sm = 0; sh++; }
      }
      updateScheduleTable();
    }

    // Schedule display
    function updateScheduleTable() {
      const tbody = document.getElementById("scheduleTable").querySelector("tbody");
      tbody.innerHTML = "";
      times.forEach(time => {
        divisions.forEach(div => {
          bunks.forEach(bunk => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
              <td>${time}</td>
              <td style="background:${div.color}">${div.name}</td>
              <td>${bunk}</td>
              <td>${activities[Math.floor(Math.random()*activities.length)] || ""}</td>
            `;
            tbody.appendChild(tr);
          });
        });
      });
    }
  </script>
</body>
</html>
