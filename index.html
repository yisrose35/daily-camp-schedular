<!DOCTYPE html>
<html>
<head>
  <title>Camp Scheduler</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    table { border-collapse: collapse; margin-top: 20px; width: 100%; }
    th, td { border: 1px solid black; padding: 8px; text-align: center; min-width: 80px; }
    th.editable:hover, td.editable:hover { background-color: #f0f0f0; cursor: text; }

    .bunk-button { margin: 2px; padding: 5px 10px; cursor: pointer; border: 1px solid #333; border-radius: 4px; display: inline-block; }
    .selected { outline: 3px solid #90CAF9; }
    #unassignedBunks { margin-top: 10px; }
  </style>
</head>
<body>
  <h1>Camp Scheduler</h1>

  <!-- Bunk Input -->
  <h3>Add Bunks</h3>
  <input id="bunkInput" placeholder="Enter bunk">
  <button onclick="addBunk()">Add Bunk</button>

  <!-- Division Input -->
  <h3>Add Divisions</h3>
  <input id="divisionInput" placeholder="Enter division name">
  <button onclick="addDivision()">Add Division</button>
  <div id="divisionButtons"></div>

  <!-- Time Inputs -->
  <h3>Generate Times</h3>
  Start: <input type="time" id="startTime">
  End: <input type="time" id="endTime">
  Increment:
  <select id="increment">
    <option value="15">15 min</option>
    <option value="30">30 min</option>
    <option value="60">60 min</option>
  </select>
  <button onclick="generateTimes()">Generate</button>

  <!-- Unassigned Bunks -->
  <h4>Unassigned Bunks</h4>
  <div id="unassignedBunks"></div>

  <!-- Schedule Table -->
  <table id="scheduleTable" style="display:none;">
    <thead>
      <tr id="divisionRow"></tr>
      <tr id="bunkRow"></tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    let bunks = [];
    let times = [];
    let divisions = {}; // { name: { bunks: [], color: "#xxxxxx" } }
    let availableDivisions = [];
    let selectedDivision = null;

    // Drastic contrasting colors
    const defaultColors = ['#4CAF50','#2196F3','#E91E63','#FF9800','#9C27B0','#00BCD4','#FFC107','#F44336'];
    let colorIndex = 0;

    // Add bunk
    function addBunk() {
      const input = document.getElementById('bunkInput');
      if(input.value.trim()!==""){
        bunks.push(input.value.trim());
        input.value="";
        updateUnassigned();
        updateTable();
      }
    }

    // Add division
    function addDivision() {
      const input = document.getElementById('divisionInput');
      if(input.value.trim()==="") return;
      const divName = input.value.trim();
      if(!availableDivisions.includes(divName)){
        const color = defaultColors[colorIndex % defaultColors.length];
        colorIndex++;
        availableDivisions.push(divName);
        divisions[divName] = { bunks: [], color: color };
        input.value="";
        setupDivisionButtons();
        updateTable();
      }
    }

    function setupDivisionButtons() {
      const container = document.getElementById("divisionButtons");
      container.innerHTML="";
      availableDivisions.forEach((divName)=>{
        const btn = document.createElement("button");
        btn.textContent = divName;
        btn.className = "bunk-button";
        btn.style.backgroundColor = divisions[divName].color;
        btn.onclick=()=>{
          selectedDivision = divName;
          Array.from(container.children).forEach(c=>c.classList.remove("selected"));
          btn.classList.add("selected");
        };
        container.appendChild(btn);
      });
    }

    function updateUnassigned() {
      const container = document.getElementById("unassignedBunks");
      container.innerHTML="";
      const assignedBunks = Object.values(divisions).flatMap(d=>d.bunks);
      const unassigned = bunks.filter(b => !assignedBunks.includes(b));
      unassigned.forEach(bunk=>{
        const btn = document.createElement("div");
        btn.textContent = bunk;
        btn.className = "bunk-button";
        btn.onclick = ()=>{
          if(selectedDivision){
            division
