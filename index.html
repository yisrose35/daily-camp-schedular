<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üèïÔ∏è Camp Scheduler</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>üèïÔ∏è Camp Scheduler</h1>

  <!-- ===================== TABS ===================== -->
  <div class="tabs">
    <button class="tab-button active" onclick="showTab('setup')">Setup & Configuration</button>
    <button class="tab-button" onclick="showTab('daily')">Daily Activities</button>
    <button class="tab-button" onclick="showTab('schedule')">Daily Schedule</button>
    <button class="tab-button" onclick="showTab('leagues')">Leagues</button>
  </div>

  <!-- ===================== SETUP TAB ===================== -->
  <div id="setup" class="tab-content active">
    <h3>Add Bunks</h3>
    <input id="bunkInput" placeholder="Enter bunk (e.g., Bunk 1)">
    <button id="addBunkBtn">Add Bunk</button>
    <div id="unassignedBunks" class="bunk-container"></div>

    <h3>Add Divisions</h3>
    <input id="divisionInput" placeholder="Enter division (e.g., 5th Grade)">
    <button id="addDivisionBtn">Add Division</button>
    <div id="divisionList" class="division-container"></div>

    <h3>Time Settings</h3>
    <label>Start Time: <input id="startTime" type="time"></label>
    <label>End Time: <input id="endTime" type="time"></label>
    <label>Interval:
      <select id="increment">
        <option value="15">15 min</option>
        <option value="30" selected>30 min</option>
        <option value="60">60 min</option>
      </select>
    </label>
    <button id="generateTimesBtn">Generate Time Slots</button>

    <h3>Fields & Activities</h3>
    <input id="fieldInput" placeholder="Enter field name (e.g., Gym)">
    <button id="addFieldBtn">Add Field</button>
    <div id="fieldsContainer" class="field-container"></div>

    <h3>Special Activities</h3>
    <input id="specialInput" placeholder="Enter special activity (e.g., Art)">
    <button id="addSpecialBtn">Add Special</button>
    <div id="specialsContainer" class="special-container"></div>
  </div>

  <!-- ===================== DAILY ACTIVITIES TAB ===================== -->
  <div id="daily" class="tab-content">
    <h2>Daily Fixed Activities</h2>
    <p class="info">Add things like Lunch, Mincha, or Swim periods that must occur at fixed times.</p>

    <label>Name<br><input id="fixedName" placeholder="e.g. Lunch / Mincha / Swim"></label>

    <div class="time-inputs">
      <label>Start Time<br><input id="fixedStart" placeholder="e.g. 12:00pm"></label>
      <label>End Time<br><input id="fixedEnd" placeholder="e.g. 12:30pm"></label>
    </div>

    <h4>Applies to Divisions</h4>
    <div id="fixedDivisionsContainer" class="chip-container"></div>

    <button id="addFixedBtn">Add Fixed Activity</button>

    <hr>
    <h3>Existing Fixed Activities</h3>
    <div id="fixedList"></div>
  </div>

  <!-- ===================== DAILY SCHEDULE TAB ===================== -->
  <div id="schedule" class="tab-content">
    <h2>Daily Schedule</h2>
    <p class="info">Automatically generated schedule. Fixed activities (like lunch) take precedence.</p>
    <button id="generateScheduleBtn">Generate Schedule</button>
    <div id="scheduleGrid" class="schedule-container"></div>
  </div>

  <!-- ===================== LEAGUES TAB ===================== -->
  <div id="leagues" class="tab-content">
    <h2>Leagues Setup</h2>
    <input id="leagueInput" placeholder="Enter league name (e.g., Basketball League)">
    <button id="addLeagueBtn">Add League</button>
    <div id="leagueList"></div>

    <h3>Division Selection</h3>
    <p>Select which divisions participate in each league. Button color matches setup colors.</p>
    <div id="leagueDivisions"></div>
  </div>

  <!-- ===================== SCRIPT INCLUDES ===================== -->
  <script src="app1.js" defer></script>
  <script src="daily_activities.js" defer></script>
  <script src="leagues.js" defer></script>
  <script src="app2.js" defer></script>

  <!-- ===================== TAB SCRIPT ===================== -->
  <script>
    function showTab(tabId) {
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
      document.querySelector(`.tab-button[onclick="showTab('${tabId}')"]`).classList.add('active');
      document.getElementById(tabId).classList.add('active');
    }

    // Generate schedule on button click
    document.addEventListener('DOMContentLoaded', () => {
      const genBtn = document.getElementById('generateScheduleBtn');
      if (genBtn) {
        genBtn.addEventListener('click', () => {
          if (typeof assignFieldsToBunks === 'function') assignFieldsToBunks();
          if (typeof renderSchedule === 'function') renderSchedule();
          else alert('Schedule generated (core updated).');
        });
      }
    });
  </script>
</body>
</html>
